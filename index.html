<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CR7SIU Fan Game</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Welcome to the CR7SIU Fan Game</h1>
        <nav>
            <ul>
                <li><button onclick="showPage('home')">Home</button></li>
                <li><button onclick="showPage('improvements')">Improvements</button></li>
                <li><button onclick="showPage('airdrop')">Airdrop</button></li>
                <li><button onclick="showPage('rewards')">Rewards</button></li>
            </ul>
        </nav>
    </header>

    <!-- Home Page -->
    <main id="home">
        <h2>Player Dashboard</h2>
        <p>Username: <span id="username-display">Not Set</span></p>
        <p>Level: <span id="player-level">1</span></p>
        <p>Score: <span id="score-display">0 CR7SIU Points</span></p>
        <p>CR7SIU Tokens: <span id="tokens-display">0</span></p>
        <div id="tap-to-earn" onclick="earnPoints()">
            <div>Tap to Earn</div>
        </div>
    </main>

    <!-- Improvements Page -->
    <main id="improvements" class="hidden">
        <h1>Improvements</h1>
        <p>Upgrade your football skills to earn more points!</p>
        <div id="attributes-container">
            <!-- Attributes will be dynamically inserted here -->
        </div>
    </main>

    <!-- Airdrop Page -->
    <main id="airdrop" class="hidden">
        <h1>Airdrop</h1>
        <p>Convert your CR7SIU points to CR7SIU Tokens. Current Conversion: 100 points = 1 CR7SIU token.</p>
        <button onclick="convertToTokens()">Convert Points</button>
        <button onclick="buyPoints()">Buy More Points</button>
    </main>

    <!-- Rewards Page -->
    <main id="rewards" class="hidden">
        <h1>Rewards</h1>
        <div id="ads-section">
            <h2>Ads</h2>
            <!-- Add ad content here if required -->
        </div>
        <div id="task-section">
            <h2>Task</h2>
            <p>Complete the tasks below to earn 1000 CR7SIU points:</p>
            <button onclick="completeTask('youtube')">Subscribe to our Youtube Channel</button>
            <button onclick="completeTask('xAccount')">Join our X Account</button>
            <button onclick="completeTask('facebook')">Like and join our Facebook Page</button>
            <div id="task-feedback"></div>
        </div>
    </main>

    <!-- New Username Setup Dialog -->
    <div id="username-setup" class="hidden">
        <h2>Welcome! Please enter your username to start:</h2>
        <input type="text" id="username-input" placeholder="Enter Username">
        <button onclick="setUsername()">Set Username</button>
    </div>

    <script src="game.js"></script>
    <script>
        // Additional JavaScript for the new changes

        // Show Page Function
        function showPage(page) {
            document.querySelectorAll('main').forEach((main) => main.classList.add('hidden'));
            document.getElementById(page).classList.remove('hidden');
            updateDisplayedValues();
        }

        // Set Username
        function setUsername() {
            var username = document.getElementById('username-input').value;
            localStorage.setItem('username', username);  // Store in localStorage
            document.getElementById('username-display').textContent = username;
            document.getElementById('username-setup').classList.add('hidden');
            showPage('home');
        }

        // Update User Stats on All Pages
        function updateDisplayedValues() {
            var username = localStorage.getItem('username');
            document.getElementById('username-display').textContent = username || 'Not Set';
            // Update the Points and Tokens across the pages
            var score = localStorage.getItem('score') || 0;
            var tokens = Math.floor(score / 100); // Example token calculation
            document.getElementById('score-display').textContent = `${score} CR7SIU Points`;
            document.getElementById('tokens-display').textContent = tokens;
        }

        // Convert CR7SIU Points to Tokens
        function convertToTokens() {
            var score = parseInt(localStorage.getItem('score') || '0');
            if (score >= 100) {
                var tokens = Math.floor(score / 100);
                localStorage.setItem('tokens', tokens);
                localStorage.setItem('score', score - (tokens * 100));  // Deduct the points used for conversion
                updateDisplayedValues();
            }
        }

        // Buy More Points (for demonstration purposes)
        function buyPoints() {
            alert("Buy points feature coming soon!");
        }

        // Validate Task Completion
        function completeTask(task) {
            var completed = false;

            if (task === 'youtube') {
                completed = window.confirm("Did you subscribe to our Youtube Channel?");
            } else if (task === 'xAccount') {
                completed = window.confirm("Did you join our X Account?");
            } else if (task === 'facebook') {
                completed = window.confirm("Did you like and join our Facebook Page?");
            }

            if (completed) {
                localStorage.setItem('score', parseInt(localStorage.getItem('score') || '0') + 1000);
                updateDisplayedValues();
                document.getElementById('task-feedback').textContent = "Task Completed! You've earned 1000 CR7SIU points.";
            } else {
                document.getElementById('task-feedback').textContent = "Task not completed. Retry.";
            }
        }
    </script>
</body>
</html>

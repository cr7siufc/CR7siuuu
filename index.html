<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CR7SIU Fan Game</title>
    <link rel="stylesheet" href="style.css">
    <style>
        #tap-to-earn {
            text-align: center;
            background: url('cr7_poster6.jpg') no-repeat center;
            background-size: cover;
            width: 200px;
            height: 200px;
            margin-top: 1in;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #tap-to-earn p {
            color: orange;
            font-size: 24px;
            font-weight: bold;
        }

        #player-info {
            display: flex;
            justify-content: space-between;
        }

        #player-level-align {
            text-align: left;
        }

        #score-align {
            text-align: right;
        }

        #bottom-menu {
            display: flex;
            justify-content: space-between;
            width: 100%;
        }

        #bottom-menu p {
            width: 48%;
        }

        .hidden {
            display: none;
        }

        .attribute-card {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <header>
        <h1>Welcome to CR7SIU Crypto</h1>
        <nav>
            <ul>
                <li><button onclick="showPage('home')">Home</button></li>
                <li><button onclick="showPage('improvements')">Improvements</button></li>
                <li><button onclick="showPage('airdrop')">Airdrop</button></li>
                <li><button onclick="showPage('rewards')">Rewards</button></li>
            </ul>
        </nav>
    </header>

    <main id="home">
        <h2>Player Dashboard</h2>
        <div id="player-info">
            <div id="player-level-align">
                <p>Player Level: <span id="player-level">1</span></p>
                <p>Username: <span id="player-username">Player</span></p>
            </div>
            <div id="score-align">
                <p>CR7SIU Points: <span id="cr7siu-coins">0</span></p>
                <p>CR7SIU Tokens: <span id="cr7siu-tokens">0</span></p>
            </div>
        </div>
        <p>Score: <span id="score-display">0 CR7SIU Points</span></p>
        <div id="tap-to-earn" onclick="earnPoints()">
            <p>Tap to Earn</p>
        </div>
    </main>

    <main id="improvements" class="hidden">
        <h1>Improvements</h1>
        <p>Upgrade your football skills to earn more points!</p>
        <div id="attributes-container">
            <!-- Attributes will be dynamically inserted here -->
        </div>
        <div id="attribute-accumulation">
            <h3>Attribute-based Points Accumulation</h3>
            <p id="total-attribute-points">Total Points from Attributes: 0 CR7SIU</p>
        </div>
    </main>

    <main id="airdrop" class="hidden">
        <h1>Airdrop</h1>
        <p>Convert your CR7SIU points to CR7SIU Tokens</p>
        <button onclick="convertToTokens()">Convert Points</button>
        <p><strong>1 CR7SIU Token = 2500 CR7SIU Points</strong></p>
        <p>Your current score: <span id="score-display-airdrop">0 CR7SIU Points</span></p>
        <div id="referral-section">
            <h2>Referral Program</h2>
            <p>Share your referral link and earn 10,000 CR7SIU Points for each new user that joins the game!</p>
            <button onclick="generateReferralLink()">Generate Referral Link</button>
            <p>Your referral link: <span id="referral-link"></span></p>
        </div>
    </main>

    <main id="rewards" class="hidden">
        <h1>Rewards</h1>
        <section id="ads">
            <h2>Ads</h2>
            <p>Check out these advertisements to support the game!</p>
        </section>
        <section id="tasks">
            <h2>Task</h2>
            <p>Complete the following tasks to earn 1000 CR7SIU points each:</p>
            <ul>
                <li><a href="https://www.youtube.com/@CR7SIUnextbigthing" target="_blank" onclick="markTaskCompleted('youtube')">Subscribe to our YouTube Channel</a></li>
                <li><a href="https://x.com/cr7siucoin" target="_blank" onclick="markTaskCompleted('x')">Join our X Account</a></li>
                <li><a href="https://www.facebook.com/profile.php?id=61571519741834&mibextid=ZbWKwL" target="_blank" onclick="markTaskCompleted('facebook')">Like and Join our Facebook Page</a></li>
            </ul>
            <div id="task-message"></div>
            <button onclick="validateTask('youtube')">Claim Rewards for YouTube Task</button>
            <button onclick="validateTask('x')">Claim Rewards for X Task</button>
            <button onclick="validateTask('facebook')">Claim Rewards for Facebook Task</button>
        </section>
    </main>

    <footer>
        <div id="bottom-menu">
                <p>CR7SIU Coin is a decentralized cryptocurrency and fan engagement platform designed for football enthusiasts and Cristiano Ronaldo fans.</p>
        </div>
    </footer>

    <script src="game.js"></script>

    <script>
        const attributes = {
            stamina: 500,
            strength: 500,
            heading: 500,
            shooting: 500,
            dribbling: 500,
            passing: 500,
            agility: 500,
            speed: 500,
            control: 500,
            fitness: 500
        };

        // Load stored attributes from localStorage
        function loadAttributes() {
            for (let attribute in attributes) {
                let savedValue = localStorage.getItem(attribute);
                if (savedValue) {
                    attributes[attribute] = parseInt(savedValue);
                }
                displayAttribute(attribute);
            }
        }

        // Display each attribute and its level on the improvements page
        function displayAttribute(attribute) {
            let container = document.getElementById('attributes-container');
            let card = document.createElement('div');
            card.classList.add('attribute-card');
            card.innerHTML = `
                <h3>${attribute.charAt(0).toUpperCase() + attribute.slice(1)}</h3>
                <p id="${attribute}-level">Level: ${Math.floor(attributes[attribute] / 200) + 1}</p>
                <button id="upgrade-${attribute}" onclick="upgradeAttribute('${attribute}')">Upgrade</button>
            `;
            container.appendChild(card);
        }

        // Upgrade an attribute when the button is clicked
        function upgradeAttribute(attribute) {
            const upgradeCost = attributes[attribute] + 200;
            let userPoints = parseInt(localStorage.getItem('userPoints') || 0); // Get current points from storage
            if (userPoints >= upgradeCost) {
                attributes[attribute] += 200;
                localStorage.setItem(attribute, attributes[attribute]); // Save updated attribute value
                userPoints -= upgradeCost;
                localStorage.setItem('userPoints', userPoints);
                loadAttributes();
                updatePointsDisplay();

                // Reward with 5000 CR7SIU points every time an attribute is upgraded to the next level
                if (attributes[attribute] % 200 === 0) {
                    userPoints += 5000;
                    localStorage.setItem('userPoints', userPoints);
                    updatePointsDisplay();
                    alert('You have received a bonus of 5000 CR7SIU Points!');
                }
            } else {
                alert("Insufficient CR7SIU Points for this upgrade.");
            }
        }

        // Update points display
        function updatePointsDisplay() {
            let userPoints = localStorage.getItem('userPoints');
            document.getElementById('score-display').innerText = `${userPoints} CR7SIU Points`;
            document.getElementById('score-display-airdrop').innerText = `${userPoints} CR7SIU Points`;
            document.getElementById('cr7siu-coins').innerText = `${userPoints}`;
        }
        
        function earnPoints() {
            let userPoints = localStorage.getItem('userPoints') || 0;
            userPoints = parseInt(userPoints) + 10; // Example increment
            localStorage.setItem('userPoints', userPoints);
            updatePointsDisplay();
        }

        function showPage(pageId) {
            let pages = document.querySelectorAll('main');
            pages.forEach(page => page.classList.add('hidden')); // Hide all pages
            document.getElementById(pageId).classList.remove('hidden'); // Show the selected page
        }

        window.onload = function() {
            loadAttributes();
            if (!localStorage.getItem('playerUsername')) {
                let username = prompt("Please enter your username");
                localStorage.setItem('playerUsername', username);
                document.getElementById("player-username").textContent = username;
            } else {
                document.getElementById("player-username").textContent = localStorage.getItem('playerUsername');
            }
        };
    </script>
</body>
</html>

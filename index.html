<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CR7SIU Fan Game</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Welcome to the CR7SIU Fan Game</h1>
        <div style="display: flex; justify-content: space-between; padding: 0 15px;">
            <div style="text-align: left;">
                <p>Player Level: <span id="player-level">1</span></p>
                <p>Total Score: <span id="score-display">0 CR7SIU Points</span></p>
            </div>
            <div style="text-align: right;">
                <p>Total CR7SIU Points: <span id="cr7siu-points">0</span></p>
                <p>Total CR7SIU Tokens: <span id="tokens-display">0</span></p>
            </div>
        </div>
    </header>

    <!-- Navigation Bar -->
    <nav>
        <ul>
            <li><button onclick="showPage('home')">Home</button></li>
            <li><button onclick="showPage('improvements')">Improvements</button></li>
            <li><button onclick="showPage('airdrop')">Airdrop</button></li>
            <li><button onclick="showPage('rewards')">Rewards</button></li>
        </ul>
    </nav>

    <!-- Home Page -->
    <main id="home">
        <h2>Player Dashboard</h2>
        <p>Username: <span id="username-display">Not Set</span></p>
        <div style="text-align: center;">
            <div id="tap-to-earn" onclick="earnPoints()"></div>
            <div id="tap-to-earn-text">Tap to Earn</div>
        </div>
    </main>

    <!-- Improvements Page -->
    <main id="improvements" class="hidden">
        <h1>Improvements</h1>
        <p>Upgrade your football skills to earn more points!</p>
        <div id="attributes-container">
            <!-- Attributes will be dynamically inserted here -->
        </div>
    </main>

    <!-- Airdrop Page -->
    <main id="airdrop" class="hidden">
        <h1>Airdrop</h1>
        <p>Convert your CR7SIU points to CR7SIU Tokens. Current Conversion: 5000 points = 1 CR7SIU token.</p>
        <p>Total CR7SIU Points: <span id="airdrop-points-display">0</span> CR7SIU Points</p>
        <p>Total CR7SIU Tokens: <span id="airdrop-tokens-display">0</span></p>
        <button onclick="convertToTokens()">Convert Points</button>

        <!-- Referral Earning Section -->
        <div id="referral-earning">
            <h2>Referral Earning</h2>
            <p>Share your unique referral link to earn 10,000 CR7SIU Points for every successful joining!</p>
            <div>
                <input type="text" id="referral-link" readonly value="Generating referral link..." />
                <button onclick="copyReferralLink()">Copy Link</button>
            </div>
            <p>Referrals Earned: <span id="referral-count">0</span></p>
            
            <!-- Social Media Share Buttons -->
            <button onclick="toggleShareOptions()">Share Referral Link</button>
            <div id="social-share" class="hidden">
                <p>Select Social Media Platform to Share:</p>
                <button onclick="shareLink('facebook')">Facebook</button>
                <button onclick="shareLink('twitter')">X (formerly Twitter)</button>
                <button onclick="shareLink('whatsapp')">WhatsApp</button>
                <button onclick="shareLink('telegram')">Telegram</button>
                <button onclick="shareLink('instagram')">Instagram</button>
            </div>
        </div>
    </main>

    <!-- Rewards Page -->
    <main id="rewards" class="hidden">
        <h1>Rewards</h1>

        <!-- Earn from Ads Section -->
        <div id="ads-section">
            <h2>Earn from Ads</h2>
            <p>Watch this video ad to earn CR7SIU Points:</p>
            <a href="https://youtu.be/byZi0lcy-jw?si=mgizMFfa7SjYugq7" target="_blank">Click to Watch Ad</a>
            <button onclick="completeAdTask()" id="ad-claim-button" disabled>Claim Ad Reward</button>
        </div>

        <!-- Claim Rewards Section -->
        <div id="claim-rewards">
            <h2>Claim Rewards</h2>
            <div class="task">
                <a href="#" target="_blank" id="task-youtube" onclick="enableTaskButton('youtube')">Subscribe to our YouTube Channel</a>
                <button id="validate-youtube" onclick="completeTask('youtube')" disabled>Validate</button>
            </div>
            <div class="task">
                <a href="#" target="_blank" id="task-x" onclick="enableTaskButton('x')">Join our X Account</a>
                <button id="validate-x" onclick="completeTask('x')" disabled>Validate</button>
            </div>
            <div class="task">
                <a href="#" target="_blank" id="task-facebook" onclick="enableTaskButton('facebook')">Like and Join our Facebook Page</a>
                <button id="validate-facebook" onclick="completeTask('facebook')" disabled>Validate</button>
            </div>
            <button id="claim-rewards-btn" onclick="claimRewards()" disabled>Claim Rewards</button>
            <p id="task-feedback"></p>
        </div>
    </main>

    <!-- New Username Setup Dialog -->
    <div id="username-setup" class="hidden">
        <h2>Welcome! Please enter your username to start:</h2>
        <input type="text" id="username-input" placeholder="Enter Username">
        <button onclick="setUsername()">Set Username</button>
    </div>

    <script src="game.js"></script>

    <script>
        let referralLink = ""; // Will store the referral link

        // Function to generate the referral link
        function generateReferralLink() {
            let userId = Math.random().toString(36).substr(2, 9);  // Generate a unique user ID
            referralLink = `https://t.me/CRLegend7_Bot?ref=${userId}`;  // Pointing to the game URL
            document.getElementById('referral-link').value = referralLink; // Display the link
        }

        function copyReferralLink() {
            let referralInput = document.getElementById('referral-link');
            referralInput.select();
            document.execCommand('copy');
        }

        function getReferralLink() {
            return referralLink;
        }

        function toggleShareOptions() {
            let shareDiv = document.getElementById('social-share');
            shareDiv.classList.toggle('hidden');
        }

        function shareLink(platform) {
            let referralText = `üö® CR7SIU Referral Program! üö®

Earn 10,000 CR7SIU Points for each successful referral!
1Ô∏è‚É£ Get your link
2Ô∏è‚É£ Share on social media
3Ô∏è‚É£ Earn points for signups! 

Start referring & boost your points now! üî•
üëâ ${getReferralLink()}
#CR7SIU #ReferralProgram #Crypto #FanToken`;

            let shareUrl;
            switch (platform) {
                case 'facebook':
                    shareUrl = `https://facebook.com/sharer/sharer.php?u=${encodeURIComponent(referralText)}`;
                    break;
                case 'twitter':
                    shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(referralText)}`;
                    break;
                case 'whatsapp':
                    shareUrl = `https://api.whatsapp.com/send?text=${encodeURIComponent(referralText)}`;
                    break;
                case 'telegram':
                    shareUrl = `https://telegram.me/share/url?url=${encodeURIComponent(referralText)}`;
                    break;
                case 'instagram':
                    shareUrl = `https://www.instagram.com/?url=${encodeURIComponent(referralText)}`;
                    break;
                default:
                    shareUrl = `https://t.me/share/url?url=${encodeURIComponent(referralText)}`;
                    break;
            }
            window.open(shareUrl, '_blank');
        }

        // Call this function to generate referral link on page load or at some appropriate time
        generateReferralLink();

        // Complete Ad Task
        function completeAdTask() {
            document.getElementById('ad-claim-button').disabled = false;
            alert("You have watched the ad. Click 'Claim Ad Reward' to claim your reward.");
        }

        // Enable task button based on task completion
        function enableTaskButton(task) {
            document.getElementById(`validate-${task}`).disabled = false;
        }

        // Mark task as completed and enable reward button
        function completeTask(task) {
            document.getElementById(`validate-${task}`).disabled = true;
            document.getElementById('claim-rewards-btn').disabled = false;
        }

        // Claim rewards after validation
        function claimRewards() {
            let tasksCompleted = [];
            if (!document.getElementById('validate-youtube').disabled) tasksCompleted.push("YouTube Subscribe");
            if (!document.getElementById('validate-x').disabled) tasksCompleted.push("X Account Join");
            if (!document.getElementById('validate-facebook').disabled) tasksCompleted.push("Facebook Like");

            alert("Rewards Claimed: " + tasksCompleted.join(", "));
            document.getElementById('claim-rewards-btn').disabled = true;
        }
    </script>
</body>
</html>
